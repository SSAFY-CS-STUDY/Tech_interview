# 21.02.22

## μ£Όμ” μ§λ¬Έ
#### π’΅ [μΈν„°λ½νΈλ” μ–Έμ  λ°μƒλλ‚μ”?](#1-μΈν„°λ½νΈ)
* CPUκ°€ ν”„λ΅κ·Έλ¨ μν–‰ μ¤‘μ— I/Oμ¥μΉλ‚ μμ™Έκ°€ λ°μƒν• κ²½μ°μ— λ°μƒν•©λ‹λ‹¤.

#### π’΅ [μΈν„°λ½νΈ κ³Όμ •μ„ κ°„λµν μ„¤λ…ν•΄μ£Όμ„Έμ”.](#2-μΈν„°λ½νΈ-κ³Όμ •)
* CPUκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
* μΈν„°λ½νΈ μ”μ²­μ΄ λ“¤μ–΄μµλ‹λ‹¤.
* CPUλ” ν”„λ΅κ·Έλ¨μ„ μ¤‘λ‹¨ν•κ³  λ‹¤μ μ‹¤ν–‰ν•  λ…λ Ήμ–΄μ™€ ν„μ¬ μƒνƒλ¥Ό PCB λΈ”λ΅μ— μ €μ¥ν•©λ‹λ‹¤.
* ISRμ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
* μΈν„°λ½νΈ μΆ…λ£ ν›„ κΈ°μ΅΄ μƒνƒλ¥Ό λ³µκµ¬ν•©λ‹λ‹¤.
* ν”„λ΅κ·Έλ¨μ„ κ³„μ† μ‹¤ν–‰ν•©λ‹λ‹¤.

#### π’΅ [μ»¤λ„μ μ—­ν• μ΄ λ¬΄μ—‡μΈκ°€μ”?](#1-μ»¤λ„)
* μ»¤λ„μ€ μ»΄ν“¨ν„° ν•λ“μ›¨μ–΄μ™€ ν”„λ΅μ„Έμ¤μ λ³΄μ•μ„ μ±…μ„μ§€λ©° ν•μ •λ μ‹μ¤ν… μμ›μ„ ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•©λ‹λ‹¤.

<br/>

## β­ κ°λ… μ •λ¦¬   
## μΈν„°λ½νΈ(Interrupt)  
### 1. μΈν„°λ½νΈ
* CPUκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•κ³  μμ„ λ•, I/Oμ¥μΉλ‚ μμ™Έκ°€ λ°μƒν•μ—¬ μ²λ¦¬κ°€ ν•„μ”ν•  κ²½μ° CPUμ—κ² μ•λ ¤ μΌμ„ μ²λ¦¬ν•  μ μλ„λ΅ ν•λ” κ²ƒ  
* μΈν„°λ½νΈ μΆ…λ¥   
    |μΆ…λ¥|μ„¤λ…|μ|
    |-|-|-|
    |ν•λ“μ›¨μ–΄ <br/> μΈν„°λ½νΈ|CPU μ™Έ μ£Όλ³€μ¥μΉλ‚ λ””μ¤ν¬ μ»¨νΈλ΅¤λ¬μ— μν•΄ λ°μƒ|μ…μ¶λ ¥ μΈν„°λ½νΈ, μ™Έλ¶€ μΈν„°λ½νΈ λ“±|
    |μ†ν”„νΈμ›¨μ–΄ <br/> μΈν„°λ½νΈ|CPUκ°€ λ‚΄λ¦° λ…λ Ήμ΄λ‚ κ΄€λ ¨ λ¨λ“μ΄ λ³€ν•λ” κ²½μ° λ°μƒ|μ‹μ¤ν…μ½, μμ™Έμ²λ¦¬ λ“±|

<br/>

### 2. μΈν„°λ½νΈ κ³Όμ •  
![image](https://user-images.githubusercontent.com/36289638/108700222-a2d71880-7549-11eb-8c87-7409551816fa.png)  

1. ν”„λ΅κ·Έλ¨ μ‹¤ν–‰  
2. μΈν„°λ½νΈ μ”μ²­  
3. ν”„λ΅κ·Έλ¨ μ¤‘λ‹¨
    * μν–‰μ¤‘μ΄λ μƒνƒλ¥Ό PCBλΈ”λ΅μ— μ €μ¥
    * PCμ— λ‹¤μμ— μ‹¤ν–‰ν•  λ…λ Ή μ£Όμ† μ €μ¥
4. μΈν„°λ½νΈ μ²λ¦¬
    * μΈν„°λ½νΈ λ²΅ν„°λ¥Ό μ½κ³  ISR μ£Όμ†λ¥Ό μ–»μ–΄ ISRλ΅ μ ν”„
    * ν•΄λ‹Ή μ½”λ“ μ²λ¦¬
5. PCκ°’ λ³µμ›ν•μ—¬ μ΄μ „ μ‹¤ν–‰ μ„μΉλ΅ λ³µμ›
6. μν–‰μ¤‘μ΄λ ν”„λ΅κ·Έλ¨ μ¬μ‹¤ν–‰

<br/>

## μ»¤λ„(Kernel)  
### 1. μ»¤λ„  
* μ»΄ν“¨ν„° μμ›λ“¤μ„ κ΄€λ¦¬ν•λ” μ—­ν• 
* HW-SWκ°„μ μ»¤λ®¤λ‹μΌ€μ΄μ…μ„ κ΄€λ¦¬ν•λ” ν”„λ΅κ·Έλ¨
* μ…μ¶λ ¥μ„ κ΄€λ¦¬ν•κ³  μ‹μ¤ν… μ½μ„ ν†µν•΄ μ»΄ν“¨ν„°μ— μλ” ν•λ“μ›¨μ–΄κ°€ μ²λ¦¬ν•  μ μλ„λ΅ μ”μ²­μ„ λ³€ν™ν•λ” μ—­ν•  β†’ μ‚¬μ©μκ°€ μ»΄ν“¨ν„° μμ› μ‚¬μ© κ°€λ¥  
* κµ¬μ„±μ”μ†
    |κ΄€λ¦¬μ|κΈ°λ¥|
    |-|-|
    |ν…μ¤ν¬ κ΄€λ¦¬μ|λ¬Όλ¦¬μ  μμ›μΈ CPUλ¥Ό μ¶”μƒμ μΈ νƒμ¤ν¬λ΅ μ κ³µ|
    |λ©”λ¨λ¦¬ κ΄€λ¦¬μ|λ¬Όλ¦¬μ  μμ›μΈ λ©”λ¨λ¦¬λ¥Ό μ¶”μƒμ  μμ›μΈ νμ΄μ§€λ‚ μ„Έκ·Έλ¨ΌνΈλ΅ μ κ³µ|
    |νμΌ μ‹μ¤ν… κ΄€λ¦¬μ|λ¬Όλ¦¬μ  μμ›μΈ λ””μ¤ν¬λ¥Ό μ¶”μƒμ  μμ›μΈ νμΌλ΅ μ κ³µ|
    |λ„¤νΈμ›ν¬ κ΄€λ¦¬μ|λ¬Όλ¦¬μ  μμ›μΈ λ„¤νΈμ›ν¬ μ¥μΉλ¥Ό μ¶”μƒμ  μμ›μΈ μ†μΌ“μΌλ΅ μ κ³µ|
    |λ””λ°”μ΄μ¤ λ“λΌμ΄λ²„ κ΄€λ¦¬μ|κ°μΆ… μ™Έλ¶€ μ¥μΉμ— λ€ν• μ ‘κ·Ό|
* μ»¤λ„ μ—­ν•  (μ™Έμ—λ„ μ—¬λ¬ κΈ°λ¥ ζ‰)  
    |μ—­ν• |κΈ°λ¥|
    |-|-|
    |ν”„λ΅μ„Έμ„ κ΄€λ¦¬|μ²λ¦¬μ†λ„ ν–¥μƒμ„ μ„ν•΄ μ—¬λ¬ ν”„λ΅μ„Έμ„λ¥Ό λ³‘λ ¬λ΅ μ—°κ²° <br/> OS μ²λ¦¬ μ”κµ¬μ— λ§μ¶° λ™μ‘ν•  μ μλ„λ΅ κ° ν”„λ΅μ„Έμ¤μ— ν•„μ”ν• ν”„λ΅μ„Έμ„λ¥Ό ν¨μ¨μ μΌλ΅ ν• λ‹Ήν•κ³  <br/> μν–‰ν•λ„λ΅ κ΄€λ¦¬|
    |ν”„λ΅μ„Έμ¤ κ΄€λ¦¬|μ¤μΌ€μ¤„λ¬λ¥Ό μ΄μ©ν•μ—¬ μ—¬λ¬ ν”„λ΅μ„Έμ¤κ°€ λ™μ‘ κ°€λ¥ν•λ„λ΅ ν•λ©° μ™Έλ¶€ ν™κ²½κ³Ό ν”„λ΅μ„Έμ¤λ¥Ό μ—°κ²°ν•κ³  κ΄€λ¦¬|
    |λ©”λ¨λ¦¬ κ΄€λ¦¬|κ° ν”„λ΅μ„Έμ¤κ°€ λ…λ¦½μ μΈ κ³µκ°„μ—μ„ μν–‰λ  μ μλ„λ΅ κ°€μƒ μ£Όμ† κ³µκ°„ μ κ³µ|
 
 <br/>

### 2. I/O Protection  
#### 2.1 μ μ € λ¨λ“(User Mode)  
* μ–΄ν”λ¦¬μΌ€μ΄μ… ν”„λ΅κ·Έλ¨μ΄ μν–‰λλ” λ¨λ“
* μ‹μ¤ν… λ°μ΄ν„°μ— μ ν•λ μ ‘κ·Όλ§μ΄ ν—μ©λλ©° ν•λ“μ›¨μ–΄μ— μ§μ ‘ μ ‘κ·Ό λ¶κ°€
* μ‹μ¤ν… μ„λΉ„μ¤λ¥Ό νΈμ¶ν•λ©΄ μ»¤λ„ λ¨λ“λ΅ μ „ν™
* mode bit 1  

#### 2.2 μ»¤λ„ λ¨λ“(Kernel Mode)
* ν”„λ΅κ·Έλ¨μ΄ μν–‰λλ‹¤κ°€ μΈν„°λ½νΈμ— κ±Έλ ¤ μ΄μμ²΄μ κ°€ νΈμ¶λμ–΄ μν–‰λλ” λ¨λ“  
* μ‹μ¤ν…μ λ¨λ“  λ©”λ¨λ¦¬μ— μ ‘κ·Ό κ°€λ¥ν•λ©° λ¨λ“  CPU λ…λ Ήμ„ μ‹¤ν–‰ κ°€λ¥
* μ΄μμ²΄μ  μ½”λ“λ‚ λ””λ°”μ΄μ¤ λ“λΌμ΄λ²„ κ°™μ€ μ»¤λ„ λ¨λ“ μ½”λ“λ¥Ό μ‹¤ν–‰
* mode bit 0

![image](https://user-images.githubusercontent.com/36289638/109080475-fd3bc900-7743-11eb-88a7-f0d3f84a7127.png)

> μ‹μ¤ν… μ½(System Call)
> μ΄μμ²΄μ ν•ν… μ”μ²­ν•λ” interface
