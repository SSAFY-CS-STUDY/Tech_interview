# 21.01.13

## μ£Όμ” μ§λ¬Έ
   
#### π’΅ μ§λ¬Έ1. ν”„λ΅ν† μ½μ΄λ€ λ¬΄μ—‡μΈκ°€μ”?
   * μ»΄ν“¨ν„°κ°„ λ°μ΄ν„° ν†µμ‹ μ„ μ›ν™ν•κ² ν•κΈ° μ„ν•΄ κ·μ •ν• κ·μ•½μ…λ‹λ‹¤. ν”„λ΅ν† μ½μ—λ” μ‹ νΈ μ†΅μ‹ μ μμ„λ‚ ν‘ν„λ²•, μ¤λ¥ κ²€μ¶λ²• λ“±μ„ μ •ν•΄λ‘΅λ‹λ‹¤.

#### π’΅ [μ§λ¬Έ2. TCPμ™€ UDPμ μ°¨μ΄μ μ€ λ¬΄μ—‡μΈκ°€μ”?](#κ°λ…1)
   * TCP ν”„λ΅ν† μ½μ€ μ—°κ²° μ§€ν–¥μ μ΄λ©°, μ‹ λΆ°μ„±μ΄ λ³΄μ¥λλ‹¤λ” νΉμ§•μ΄ μμµλ‹λ‹¤.
   
     μ΄μ™€ λ‹¬λ¦¬, UDP ν”„λ΅ν† μ½μ€ λΉ„μ—°κ²° μ§€ν–¥μ μ΄λ©°, μ„±λ¥μ΄ λΉ λ¥΄λ‹¤λ” νΉμ§•μ΄ μμµλ‹λ‹¤.

   
#### π’΅ [μ§λ¬Έ3. TCP 3 way handshakingμ΄ λ¬΄μ—‡μΈκ°€μ”?](#κ°λ…2)

   * ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ ν†µμ‹ μ„ ν•κΈ°μ „ μ •ν™•ν• μ „μ†΅μ„ λ³΄μ¥ν•κΈ° μ„ν•΄ μ»΄ν“¨ν„°κ°„ μ„Έμ…μ„ μλ¦½ν•λ” κ³Όμ •μΌλ΅μ„ TCP ν”„λ΅ν† μ½μ—μ„ μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•κΈ° μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤.

#### π’΅ [μ§λ¬Έ4. TCP 4 way handshakingμ΄ λ¬΄μ—‡μΈκ°€μ”?](#κ°λ…2)
   
   * ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ—°κ²°ν•κΈ° μ„ν•΄ 3-way handshaking κ³Όμ •μ΄ ν•„μ”ν•λ“―μ΄ μ—°κ²°μ„ μΆ…λ£ν• λ•μ—λ„ λ°μ΄ν„° μ†μ‹¤μ—†λ” μ „μ†΅μ„ λ³΄μ¥ν•κΈ° μ„ν•΄ handshaking κ³Όμ •μ΄ ν•„μ”ν•λ° μ΄κ²ƒμ΄ 4-way handshaking μ…λ‹λ‹¤.

<br/>

## μ‹¬ν™” μ§λ¬Έ

#### π’΅ [μ§λ¬Έ1. TCPλ¥Ό μ‚¬μ©ν•λ” λ€ν‘μ μΈ ν”„λ΅ν† μ½μ€ λ¬΄μ—‡μΈκ°€μ”?](#κ°λ…1)
   * HTTPκ°€ μμµλ‹λ‹¤. HTTP ν”„λ΅ν† μ½μ€ ν• λ¬Έμ„μ—μ„ λ‹¤λ¥Έ λ¬Έμ„λ΅ μ¦‰μ‹ μ ‘κ·Όν•  μ μλ” ν…μ¤νΈλ¥Ό ν•μ΄νΌν…μ¤νΈλΌκ³  ν•λ”λ° μ΄ ν…μ¤νΈλ¥Ό μ „μ†΅ν•λ” κ·μ•½μ„ λ§ν•λ‹¤.

#### π’΅ [μ§λ¬Έ2. μ„λ²„κ°€ λ§μ§€λ§‰μ— FIN μ„ λ³΄λ‚΄λ” μ΄μ λ” λ¬΄μ—‡μΈκ°€μ”?](#κ°λ…2)
   * μ„λ²„κ°€ μ•„μ§ ν΄λΌμ΄μ–ΈνΈμ— λ³΄λ‚Ό λ°μ΄ν„°κ°€ λ‚¨μ•„μμ„ κ²½μ° λ°μ΄ν„°λ¥Ό λ‹¤ μ „μ†΅ν•μ§€λ„ λ»ν•μ±„ ν΄λΌμ΄μ–ΈνΈμ—μ„ ν¬νΈλ¥Ό λ‹«μ•„λ²„λ¦¬κ² λλ―€λ΅ μ„λ²„ λν• μΆ…λ£λ  μ¤€λΉ„κ°€ λμ—λ‹¤λ” μλ―Έλ΅ FIN μ„ λ³΄λ‚΄κ² λ©λ‹λ‹¤.

 
#### π’΅ [μ§λ¬Έ3. ν΄λΌμ΄μ–ΈνΈκ°€ λ§μ§€λ§‰μ— ACK λ¥Ό κµ³μ΄ λ³΄λ‚΄λ” μ΄μ λ” λ¬΄μ—‡μΈκ°€μ”?](#κ°λ…2)  
   * μ„λ²„κ°€ λ³΄λ‚Έ μΆ…λ£ μ‹ νΈλ¥Ό ν΄λΌμ–ΈνΈκ°€ λ°›μ§€ λ» ν•  κ²½μ° ν΄λΌμ΄μ–ΈνΈλ” μΆ…λ£κ°€ λμ§€ λ»ν•μ±„ κ³„μ† κΈ°λ‹¤λ¦¬κ² λ©λ‹λ‹¤.ν•μ§€λ§ μ„λ²„λ” μ΄λ―Έ ν¬νΈλ¥Ό λ‹«κ³  λ”μ΄μƒ μ‘λ‹µμ„ μ•ν•λ” μƒνƒμ΄κΈ°μ— ν΄λΌμ΄μ–ΈνΈλ” λ¶ν•„μ”ν• μμ›μ„ μ†λ¨ν•κ² λ©λ‹λ‹¤.

<br/>

## κ°λ… μ •λ¦¬

### β­ κ°λ…1
   * TCP

      **μ—°κ²° μ§€ν–¥ ν”„λ΅ν† μ½**
      
      TCP ν”„λ΅ν† μ½μ—μ„λ” λ°μ΄ν„° μ†΅μμ‹ μ„ μ„ν•΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ†μΌ“μ΄ μ—°κ²°λμ–΄ μμ–΄μ•Ό ν•λ©°, λ°μ΄ν„°κ°€ μ μ‹¤λλ©΄ λ°μ΄ν„° μ¬μ „μ†΅μ„ μ”μ²­ν•¨μΌλ΅μ¨ μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•©λ‹λ‹¤.μ¦‰, μ‹ λΆ°μ„± μλ” λ°μ΄ν„° μ „μ†΅μ΄ κ°€λ¥ν•λ‹¤λ” μ¥μ μΌλ΅ μΈν•΄ HTTP, FTP, TELNET λ“± λ€λ¶€λ¶„μ μ‘μ© κ³„μΈµ ν”„λ΅ν† μ½μ μ „μ†΅ κ³„μΈµμΌλ΅ μ‚¬μ© λ©λ‹λ‹¤.

   * UDP
   
      **λΉ„μ—°κ²° μ§€ν–¥ ν”„λ΅ν† μ½**
      
      μ „μ†΅ν• λ°μ΄ν„°κ°€ μ μ „λ‹¬μ΄ λμ—λ”μ§€ ν™•μΈν•μ§€ μ•κ³  λ‹¨μ§€ λ°μ΄ν„°λ§ λ³΄λ‚Έλ‹¤λ” μ μ΄ TCP ν”„λ΅ν† μ½κ³Ό λ‹¤λ¦…λ‹λ‹¤. μ¦‰, μ‹ λΆ°μ μ΄μ§€ μ•μΌλ©°( λΉ„μ‹ λΆ°μ„± ), λ€μ‹  **μ†λ„κ°€ λΉ λ¥΄λ‹¤**λ” μ¥μ μ΄ μμµλ‹λ‹¤. ν•μ§€λ§ UDP ν”„λ΅ν† μ½μ΄ μ•„μ μ‹ λΆ°μ„±μ΄ μ—†λ‹¤λ” κ²ƒμ€ μ•„λ‹™λ‹λ‹¤. ν—¤λ”μ— checksum μ΅΄μ¬ν•©λ‹λ‹¤. κ·Έλμ„ UDP ν”„λ΅ν† μ½μ€ μμ•…μ΄λ‚ λ™μμƒ μ¤νΈλ¦¬λ°(streaming)κ³Ό κ°™μ€ μ„λΉ„μ¤μ— μ ν•©ν•©λ‹λ‹¤.

   * TCP/UDP μ£Όμ” ν”„λ΅ν† μ½

     <img src="./images/main-protocol-tcp-udp.png" height="300">

<br/>

   <details markdown="1">
    <summary>μ¶μ²</summary>
    https://victorydntmd.tistory.com/288
  </details>

#### β­ κ°λ…2
   * 3 way handshaking
     
     β… TCP μ—°κ²° μ‹μ‘
     
     <img src="./images/tcp-3-handshaking.png" height="300">

   TCPλ” μ„Έκ·Έλ¨ΌνΈλ¥Ό μ΄μ©ν•μ—¬ μ‹μ¤ν…μ λ°μ΄ν„° μμ‹  μ¤€λΉ„λ¥Ό ν™•μΈν•κ³  λ‹¤μκ³Ό κ°™μ€ μ μ°¨λ¥Ό λ°μ€ ν›„ λ°μ΄ν„°λ¥Ό λ³΄λ‚΄κ² λ©λ‹λ‹¤. 

   >1. μ†΅μ‹  : ν†µμ‹ ν•κ³  μ‹¶μ–΄μ”. SYNλ¥Ό λ³΄λ‚Όκ²μ”.
   >
   >2. μμ‹  : κ·Έλ? λ‚λ„ ν†µμ‹  μ¤€λΉ„ λ¬μ–΄μ”! SYN-ACK
   >
   >3. μ†΅μ‹  : κ·Έλ? κ·Έλ¬λ©΄ λ³΄λ‚Όκ²  ACK

   TCP μ΄κΈ° μ—°κ²° κ³Όμ • μ΄ν›„μ—λ” μ†΅μ‹  TCPλ” λ‹¤λ¥Έ ACKμ„Έκ·Έλ¨ΌνΈλ¥Ό λ³΄λ‚Έ λ‹¤μ κ³„μ† λ°μ΄ν„°λ¥Ό λ³΄λ‚΄κ² λ©λ‹λ‹¤. 

   * 4 way handshaking
     
     β… TCP μ—°κ²° μΆ…λ£
     
     <img src="./images/tcp-4-handshaking.png" height="300">

>1. λ¨Όμ € ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°μ„ λ‹«μΌλ ¤ ν•  λ–„ FIN μΌλ΅ μ„¤μ •λ μ„Έκ·Έλ¨ΌνΈλ¥Ό λ³΄λƒ…λ‹λ‹¤. 
>
>2. ν΄λΌμ΄μ–ΈνΈλ” FIN_WAIT_1μƒνƒλ΅ λ“¤μ–΄κ°€κ³  μ„λ²„μ μ‘λ‹µμ„ κΈ°λ‹¤λ¦½λ‹λ‹¤. 
>
>3. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ΅ ACKλΌλ” μΉμΈ μ„Έκ·Έλ¨ΌνΈλ¥Ό λ³΄λƒ…λ‹λ‹¤. 
>
>4. ν΄λΌμ΄μ–ΈνΈκ°€ μ„Έκ·Έλ¨ΌνΈλ¥Ό λ°›μΌλ©΄ FIN_WAIT_2μƒνƒμ— λ“¤μ–΄κ°‘λ‹λ‹¤. 
>
>5. μ„λ²„λ” ACKλ¥Ό λ³΄λ‚Έ ν›„ μΌμ •μ‹κ°„ μ΄ν›„μ— FINμ΄λΌλ” μ„Έκ·Έλ¨ΌνΈλ¥Ό λ³΄λƒ…λ‹λ‹¤. 
>
>6. ν΄λΌμ΄μ–ΈνΈλ” λ°›κ² λλ©΄ TIME_WAITμƒνƒκ°€ λκ³  λ‹¤μ‹ μ„λ²„λ΅ ACKλ¥Ό λ³΄λ‚΄μ„ μ„λ²„λ” CLOSEDμƒνƒκ°€ λ©λ‹λ‹¤. 
>
>7. ν΄λΌμ΄μ–ΈνΈλ” 30μ΄μ—μ„ 2λ¶„λ™μ• λ€κΈ° ν›„ μ—°κ²°μ΄ κ³µμ‹μ μΌλ΅ λ‹«νκ³  ν΄λΌμ΄μ–ΈνΈ μΈ΅μ λ¨λ“  μμ›μ μ—°κ²°μ΄ ν•΄μ  λ©λ‹λ‹¤. 

   <details markdown="1">
    <summary>μ¶μ²</summary>
    https://m.blog.naver.com/PostView.nhn?blogId=jhc9639&logNo=221411218450&proxyReferer=https:%2F%2Fwww.google.com%2F
  </details>
<br/>
